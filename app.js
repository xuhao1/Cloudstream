// Generated by CoffeeScript 1.7.1
(function() {
  var app, io, run, server;

  app = (require('express'))();

  server = (require('http')).createServer(app);

  io = (require('socket.io')).listen(server);

  app.get('/', function(req, res) {
    return res.sendfile(__dirname + '/index.html');
  });

  app.get('/js/*', function(req, res) {
    return res.sendfile(__dirname + req.path);
  });

  app.get('/css/*', function(req, res) {
    return res.sendfile(__dirname + req.path);
  });

  run = function(socket) {
    var data, speed;
    speed = {};
    speed[0] = Math.random() * 100;
    speed[1] = Math.random() * 100;
    speed[2] = Math.random() * 100;
    data = {
      'speed': speed
    };
    return socket.send(JSON.stringify(data));
  };

  io.sockets.on('connection', function(socket) {
    console.log("Connected");
    return setInterval(run, 1000, socket);
  });

  server.listen(8080);

}).call(this);
